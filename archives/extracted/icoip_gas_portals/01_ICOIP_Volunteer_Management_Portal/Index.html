<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta charset="utf-8">
    <title><?= JSON.parse(appConfigJson).projectName ?></title>
    <?!= include('Styles'); ?>
  </head>
  <body>
    <div class="page-shell">
      <header class="hero">
        <div class="hero-copy">
          <p class="eyebrow">Integrated Care &amp; Operations Intelligence Programme (ICOIP)</p>
          <h1 id="pageTitle"></h1>
          <p id="pageSubtitle" class="hero-subtitle"></p>
          <p id="programmeDescription" class="programme-description"></p>
        </div>
        <div class="hero-actions">
          <button class="btn btn-primary" id="addRecordBtn">Add New Record</button>
          <button class="btn btn-secondary" id="refreshBtn">Refresh</button>
          <button class="btn btn-ghost" id="setupBtn">Reset Demo Data</button>
        </div>
      </header>

      <section class="stats-grid" id="statsGrid"></section>

      <section class="toolbar">
        <div class="toolbar-left">
          <input id="searchInput" type="search" placeholder="Search records">
          <button class="btn btn-secondary" id="searchBtn">Search</button>
          <button class="btn btn-ghost" id="clearSearchBtn">Clear</button>
        </div>
        <div class="toolbar-right">
          <span class="muted" id="recordCountLabel">0 records</span>
        </div>
      </section>

      <section class="table-card">
        <div class="table-wrap">
          <table id="recordsTable">
            <thead>
              <tr id="tableHeadRow"></tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>
      </section>
    </div>

    <div class="modal hidden" id="recordModal">
      <div class="modal-panel">
        <div class="modal-header">
          <div>
            <p class="eyebrow">Record Form</p>
            <h2 id="modalTitle">Add Record</h2>
          </div>
          <button class="icon-btn" id="closeModalBtn" aria-label="Close">Ã—</button>
        </div>

        <form id="recordForm">
          <input type="hidden" id="recordIdField" name="Record ID">
          <div class="form-grid" id="formGrid"></div>
          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Save Record</button>
            <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <div class="toast hidden" id="toast"></div>

    <script>
      window.APP_BOOTSTRAP = <?= appConfigJson ?>;
    </script>
    <?!= include('Scripts'); ?>
  </body>
</html>
